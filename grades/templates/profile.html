{% include "header.html" with title="Profile" %}

<main>
    <h1>Your grades</h1>
    <form action="login.html" class="profile-action">
        <p class="profile-action-desc">Currently logged in as {{ user.username }}. 
            <a title="Logs the user out of account" href="/profile/logout/" role="button" class="action-logout-button">Log out</a>
        </p>
    </form>
    {% if is_ta %}
    <table>
        <thead>
            <tr>
                <th class="left-align table-border-bottom">Assignment</th>
                <th class="right-align table-border-bottom">Graded</th>
            </tr>
        </thead>
        
        <tbody>
            {% for item in assignments_and_counts %}
            <tr>
                <td>
                <a title="Links to {{ item.assignment.title }} assignment" href="/{{ item.assignment.id }}/">{{ item.assignment.title }}</a>
                </td>
                <td class="right-align">{{ item.count }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    {% else %}
    <table>
        <thead>
            <tr>
                <th class="left-align table-border-bottom">Assignment</th>
                <th class="right-align table-border-bottom">Score</th>
            </tr>
        </thead>
        
        <tbody>
            {% for item in assignments_and_scores %}
            <tr>
                <td>
                <a title="Links to {{ item.assignment.title }} assignment" href="/{{ item.assignment.id }}/">{{ item.assignment.title }}</a>
                </td>
                <td class="right-align">{{ item.score }}</td>
            </tr>
        {% endfor %}
        </tbody>

        <tfoot>
            <tr>
                <td class="left-align bold">Final Grade</td>
                <td class="right-align bold">{{ final_grade }}</td>
            </tr>
        </tfoot>
    </table>
    {% endif %}
</main>

<script type="module">
    import {make_table_sortable} from "/static/main.js";

    console.log("called");
    make_table_sortable($("table"));
</script>